{
  "variables": {
    "do_token":""
  },
  "builders": [
    {
      "type": "digitalocean",
      "ssh_username": "root",
      "api_token": "{{ user `do_token` }}",
      "image": "ubuntu-18-04-x64",
      "region": "blr1",
      "size": "s-4vcpu-8gb",
      "snapshot_name": "benchmark_image",
      "user_data_file": "bootstrap.sh"
    }
  ],
  "provisioners": [
     {
  	"type": "file",
  	"source": "envoy.yaml",
	"destination": "/tmp/"
     },
     {
  	"type": "file",
  	"source": "tcp_server.js",
	"destination": "/tmp/"
     },
     {
  	"type": "shell",
  	"inline": ["while [ ! -e /var/lib/cloud/instance/boot-finished ]; do sleep 2; done"]
     }
  ]
}
